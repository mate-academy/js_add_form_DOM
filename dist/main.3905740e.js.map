{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","table","tBody","message","createElement","header","text","rowsArray","Array","from","rows","clicksOnTable","sortlist","colNum","type","compare","toNumber","string","str","replace","slice","rowA","rowB","cells","textContent","localeCompare","append","sort","addEventListener","ev","elem","target","tagName","cellIndex","dataset","handleListRows","item","parentNode","classList","toggle","preventSelection","preventDefault","insertAdjacentHTML","form","button","inputName","inputPosition","inputOffice","inputAge","inputSalary","onlyWithLabels","filter","element","parentElement","showNotification","title","shownText","className","add","setTimeout","remove","formatValue","input","firstLetter","toUpperCase","val","i","length","formatToString","onclick","correctInputTextLength","every","el","value","correctInputAgeLength","qa","correctInputSalaryLength","prevTargetContent","focus","evt","key","blur"],"mappings":"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","file":"main.3905740e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\n\nconst table = document.querySelector('table');\nconst tBody = table.querySelector('tbody');\n\nconst message = document.createElement('div');\nconst header = document.createElement('h2');\nconst text = document.createElement('p');\n\nlet rowsArray = Array.from(tBody.rows);\n\nlet clicksOnTable = 0;\n\ntable.addEventListener('click', function(ev) {\n  clicksOnTable++;\n\n  const elem = ev.target;\n\n  if (elem.tagName !== 'TH') {\n    return;\n  }\n  sortlist(elem.cellIndex, elem.dataset.type);\n});\n\nfunction sortlist(colNum, type) {\n  let compare;\n\n  if (clicksOnTable % 2 !== 0) {\n    compare = function(rowA, rowB) {\n      switch (type) {\n        case 'string':\n          return rowA.cells[colNum].textContent\n            .localeCompare(rowB.cells[colNum].textContent);\n\n        case 'number':\n          return rowA.cells[colNum].textContent\n          - rowB.cells[colNum].textContent;\n        case 'salary':\n          return toNumber(rowA.cells[colNum].textContent)\n          - toNumber(rowB.cells[colNum].textContent);\n      }\n    };\n  } else {\n    compare = function(rowA, rowB) {\n      switch (type) {\n        case 'string':\n          return rowB.cells[colNum].textContent\n            .localeCompare(rowA.cells[colNum].textContent);\n\n        case 'number':\n          return rowB.cells[colNum].textContent\n          - rowA.cells[colNum].textContent;\n        case 'salary':\n          return toNumber(rowB.cells[colNum].textContent)\n          - toNumber(rowA.cells[colNum].textContent);\n      }\n    };\n  }\n\n  function toNumber(string) {\n    const str = string.replace(',', '.').slice(1);\n\n    return str;\n  }\n\n  tBody.append(...rowsArray);\n\n  rowsArray.sort(compare);\n}\n\nconst handleListRows = function(ev) {\n  const item = ev.target;\n\n  if (item.tagName !== 'TD') {\n    return;\n  }\n  item.parentNode.classList.toggle('active');\n};\n\nconst preventSelection = function(ev) {\n  ev.preventDefault();\n};\n\ntable.addEventListener('click', handleListRows);\ntable.addEventListener('mousedown', preventSelection);\n\n// adding form\n\nbody.insertAdjacentHTML('beforeend', `\n  <form\n    class='new-employee-form'\n    method = \"GET\"\n    action=\"/\"\n  >\n    <label>\n      Name:\n      <input\n        type=\"text\"\n        name=\"name\"\n        data-qa=\"name\"\n        minlength=\"4\"\n        required\n      />\n    </label>\n    <label>\n      Position:\n      <input\n        type=\"text\"\n        name=\"position\"\n        data-qa=\"position\"\n        minlength=\"4\"\n        required\n      />\n    </label>\n    <label>\n      Office:\n      <select\n        name=\"office\"\n        data-qa=\"office\"\n        required\n      >\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input\n        type=\"number\"\n        name=\"age\"\n        data-qa=\"age\"\n        min=\"18\"\n        max=\"90\"\n        required\n      />\n    </label>\n    <label>\n      Salary:\n      <input\n        type=\"number\"\n        name=\"salary\"\n        data-qa=\"salary\"\n        required\n      />\n    </label>\n\n    <button type=\"submit\">Save to lable</button>\n      \n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\nconst button = body.querySelector('button');\n\nconst inputName = document.querySelector('[data-qa =\"name\"]');\nconst inputPosition = document.querySelector('[data-qa =\"position\"]');\nconst inputOffice = document.querySelector('[data-qa =\"office\"]');\nconst inputAge = document.querySelector('[data-qa =\"age\"]');\nconst inputSalary = document.querySelector('[data-qa =\"salary\"]');\n\nconst onlyWithLabels = [...form].filter(element =>\n  element.parentElement.tagName === 'LABEL');\n\nbutton.onclick = (ev) => {\n  const correctInputTextLength = [...onlyWithLabels]\n    .filter(elem => elem.type === 'text')\n    .every(el => el.value.length > 3);\n\n  const correctInputAgeLength = [...onlyWithLabels]\n    .filter(elem => elem.dataset.qa === 'age')\n    .every(el => el.value > 17 && el.value < 91);\n\n  const correctInputSalaryLength = [...onlyWithLabels]\n    .filter(elem => elem.dataset.qa === 'salary')\n    .every(el => el.value.length > 0);\n\n  if (correctInputTextLength\n    && correctInputAgeLength\n    && correctInputSalaryLength) {\n    ev.preventDefault();\n\n    tBody.insertAdjacentHTML('beforeend', `\n      <tr>\n        <td>${formatValue(inputName.value)}</td>\n        <td>${formatValue(inputPosition.value)}</td>\n        <td>${inputOffice.value}</td>\n        <td>${inputAge.value}</td>\n        <td>${formatToString(inputSalary.value)}</td>\n      </tr>\n    `);\n\n    rowsArray = Array.from(tBody.rows);\n  }\n\n  if (!correctInputTextLength) {\n    showNotification('Attention',\n      \"'The length must be more than 4 digits'\", 'error');\n  } else if (!correctInputAgeLength) {\n    showNotification('Attention',\n      \"'The age must be betwen 18 and 90'\", 'error');\n  } else if (!correctInputSalaryLength) {\n    showNotification('Attention',\n      \"'Salary must be passed'\", 'error');\n  } else {\n    showNotification('Congratulation',\n      'New employee is added to the form', 'success');\n  }\n};\n\nfunction showNotification(title, shownText, type) {\n  message.className = 'notification';\n  header.className = `title`;\n  header.textContent = `${title}`;\n  text.textContent = `${shownText}`;\n  message.classList.add(`${type}`);\n  message.append(header, text);\n  document.body.append(message);\n\n  setTimeout(() => {\n    message.remove();\n  }, 4000);\n}\n\nfunction formatValue(input) {\n  const firstLetter = input.slice(0, 1).toUpperCase();\n  let val = '';\n\n  for (let i = 1; i < input.length; i++) {\n    if (input[i] === ' ') {\n      val += ' ' + input[i + 1].toUpperCase();\n      i += 2;\n    }\n\n    val += input[i];\n  }\n\n  return firstLetter + val;\n}\n\nfunction formatToString(input) {\n  if (input.length === 3) {\n    return '$' + '0,' + input;\n  }\n\n  if (input.length === 2) {\n    return '$' + '0,0' + input;\n  }\n\n  if (input.length === 1) {\n    return '$' + '0,00' + input;\n  }\n\n  return '$' + input.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\n// editing of table cells\n\ntBody.addEventListener('dblclick', function(ev) {\n  const target = ev.target;\n\n  if (target.tagName !== 'TD') {\n    return;\n  }\n\n  const prevTargetContent = target.textContent;\n\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  input.value = prevTargetContent;\n  target.textContent = '';\n  target.append(input);\n  input.focus();\n\n  input.addEventListener('blur', function() {\n    if (input.value.length === 0) {\n      input.value = prevTargetContent;\n\n      showNotification('Attention',\n        \"The field shouldn't be empty \\n *Initial value was restored!\",\n        'error');\n    }\n    target.textContent = input.value;\n    input.remove();\n  });\n\n  input.addEventListener('keypress', function(evt) {\n    if (input.value.length === 0) {\n      input.value = prevTargetContent;\n\n      showNotification('Attention',\n        \"The field shouldn't be empty \\n *Initial value was restored!\",\n        'error');\n    }\n\n    if (evt.key === 'Enter') {\n      target.textContent = input.value;\n      input.remove();\n      input.blur();\n    }\n  });\n});\n"]}